webpackJsonp([4],{"3p/m":function(t,a,e){"use strict";var i=e("vRMc"),n=e.n(i),s=e("CAjZ"),o=e("iwZY"),r=e("4YIr"),c=Object(s.b)("tag"),l=c[0],u=c[1];function d(t,a,e,i){var s,c=a.type,l=a.mark,d=a.plain,f=a.color,v=a.round,g=a.size,p=a.textColor,h=((s={})[d?"color":"backgroundColor"]=f,s);d?(h.color=p||f,h.borderColor=f):(h.color=p,h.background=f);var m={mark:l,plain:d,round:v};g&&(m[g]=g);var _=a.closeable&&t(r.a,{attrs:{name:"cross"},class:u("close"),on:{click:function(t){t.stopPropagation(),Object(o.a)(i,"close")}}});return t("transition",{attrs:{name:a.closeable?"van-fade":null}},[t("span",n()([{key:"content",style:h,class:u([m,c])},Object(o.b)(i,!0)]),[null==e.default?void 0:e.default(),_])])}d.props={size:String,mark:Boolean,color:String,plain:Boolean,round:Boolean,textColor:String,closeable:Boolean,type:{type:String,default:"default"}},a.a=l(d)},"6qFF":function(t,a){},AS4k:function(t,a,e){"use strict";var i=e("7Ael"),n=(e.n(i),e("UlLi")),s=(e.n(n),e("t7m+")),o=(e.n(s),e("981R")),r=(e.n(o),e("Gm5w")),c=(e.n(r),e("R20v"));e.n(c)},HzJ8:function(t,a,e){t.exports={default:e("vY6q"),__esModule:!0}},Lndr:function(t,a,e){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var i=e("HzJ8"),n=e.n(i),s=e("3cXf"),o=e.n(s),r=(e("oOZB"),e("fT1p")),c=(e("vhY3"),e("ZAtG")),l=(e("Wo5J"),e("3p/m")),u=(e("AS4k"),e("mFto")),d=(e("5kso"),e("D/eJ")),f=e("uvit"),v=e("cvKr");f.a.use(d.a),f.a.use(u.a),f.a.use(l.a),f.a.use(c.a),f.a.use(r.a);var g={name:"gift",data:function(){return{status:!1,value:"",giftData:{npi:1,ids:"",data:[]},giftObj:{code:"",id:""}}},computed:{getUserInformation:function(){return this.$store.getters.getUserInformation}},watch:{getUserInformation:{handler:function(t,a){"{}"==o()(this.$route.query)&&(this.giftData={npi:1,ids:"",data:[]},this.getGiftData())},immediate:!0,deep:!0}},methods:{onSearch:function(){this.giftData={npi:1,ids:"",data:[]},this.getGiftData()},gamesdetails:function(t){this.$router.push("/detail/"+t)},playgame:function(t){this.$router.push("/game/"+t)},moreBtn:function(t){for(var a=t.target.parentElement.getElementsByTagName("dl"),e=0;e<a.length;e++)a[e].style.display="flex";t.target.remove()},getCode:function(t,a,e,i){var n=this;if(!Object(v.a)("gift"))return!1;this.$api.article.receiveGift({uid:this.getUserInformation.uid,id:t}).then(function(t){n.status=!0,n.giftData.data[a].gift[e].is_receive=1,n.giftData.data[a].gift[e].code=t.data.data.code,n.giftObj.code=t.data.data.code,n.giftObj.id=i}).catch(function(t){console.log(t)})},lockCode:function(t,a){this.status=!0,this.giftObj.code=t,this.giftObj.id=a},copycode:function(t){Object(v.b)(t,"礼包码复制成功",r.a)},getGiftData:function(){var t=this;this.$api.article.gameGift({page:this.giftData.npi,uid:this.getUserInformation.uid,keywords:this.value,ids:this.giftData.ids}).then(function(a){console.log(a),t.giftData.npi=a.data.npi;var e=[],i=!0,s=!1,o=void 0;try{for(var r,c=n()(a.data.data.list);!(i=(r=c.next()).done);i=!0){var l=r.value;e.push(l.game_id),t.giftData.data.push(l)}}catch(t){s=!0,o=t}finally{try{!i&&c.return&&c.return()}finally{if(s)throw o}}t.giftData.ids=e.join(",")}).catch(function(t){console.log(t)})}},created:function(){"{}"!=o()(this.$route.query)&&(this.value=this.$route.query.name,this.onSearch())},mounted:function(){}},p={render:function(){var t=this,a=t.$createElement,i=t._self._c||a;return i("div",{attrs:{id:"zlhy-gift-page"}},[i("van-search",{attrs:{"show-action":"",shape:"round",placeholder:"输入“游戏名称” 搜索礼包"},on:{search:t.onSearch},scopedSlots:t._u([{key:"action",fn:function(){return[i("div",{on:{click:t.onSearch}},[t._v("搜索")])]},proxy:!0}]),model:{value:t.value,callback:function(a){t.value=a},expression:"value"}}),t._v(" "),i("ul",{staticClass:"gameItem"},[t._l(t.giftData.data,function(a,e){return i("li",{key:e},[i("div",{staticClass:"gameBox"},[i("div",{staticClass:"pic",on:{click:function(e){return t.gamesdetails(a.game_id)}}},[i("img",{attrs:{src:a.icon,alt:a.game_name,width:"100%"}})]),t._v(" "),i("div",{staticClass:"info",on:{click:function(e){return t.gamesdetails(a.game_id)}}},[i("label",[t._v(t._s(a.game_name))]),t._v(" "),i("p",[t._v("礼包")])]),t._v(" "),i("a",{staticClass:"playGameBtn",attrs:{href:"javascript:void(0);",target:"_self"},on:{click:function(e){return t.playgame(a.game_id)}}},[t._v("开玩")])]),t._v(" "),0!=a.gift.length?i("div",{staticClass:"moreGiftBox"},[i("div",{staticClass:"giftList"},[i("ol",t._l(a.gift,function(n,s){return i("dl",{directives:[{name:"show",rawName:"v-show",value:s<2,expression:"inx < 2"}],key:s},[i("div",{staticClass:"conText"},[i("div",{staticClass:"name"},[i("span",[t._v(t._s(n.name))])]),t._v(" "),i("p",{staticClass:"desc",domProps:{innerHTML:t._s(n.content)}}),t._v(" "),i("div",{staticClass:"progressBar"},[i("em",[t._v(t._s(n.surplus_sum)+" / "+t._s(n.total_sum))]),t._v(" "),i("span",{style:{width:n.surplus_sum/n.total_sum*100+"%"}})])]),t._v(" "),0==n.surplus_sum&&0==n.is_receive?i("a",{staticClass:"getGift",attrs:{href:"javascript:void(0);",target:"_self"}},[t._v("已完")]):0==n.is_receive?i("a",{staticClass:"getGift",attrs:{href:"javascript:void(0);",target:"_self"},on:{click:function(i){return t.getCode(n.id,e,s,a.game_id)}}},[t._v("领取")]):i("a",{staticClass:"getGift",attrs:{href:"javascript:void(0);",target:"_self"},on:{click:function(e){return t.lockCode(n.code,a.game_id)}}},[t._v("查看")])])}),0),t._v(" "),a.gift.length>2?i("a",{staticClass:"btn-more",attrs:{href:"javascript:void(0);",target:"_self"},on:{click:function(a){return t.moreBtn(a)}}},[t._v("查看剩余("+t._s(a.gift.length-2)+"个)礼包")]):t._e()])]):t._e()])}),t._v(" "),void 0==t.giftData.data||0==t.giftData.data.length?i("dl",[i("img",{attrs:{src:e("77eQ"),alt:"无数据",width:"50%"}})]):t._e()],2),t._v(" "),0!=t.giftData.npi?i("p",{staticStyle:{padding:"30px 0","font-size":"14px"},on:{click:t.getGiftData}},[t._v("点击加载更多")]):t._e(),t._v(" "),i("van-popup",{attrs:{round:""},model:{value:t.status,callback:function(a){t.status=a},expression:"status"}},[i("div",{attrs:{id:"giftFixed"}},[i("h2",[t._v("礼包兑换码")]),t._v(" "),i("div",{staticClass:"form"},[i("div",{staticClass:"list"},[i("input",{attrs:{type:"text",disabled:"disabled"},domProps:{value:t.giftObj.code}})]),t._v(" "),i("p",[t._v("游戏礼包兑换方式，点击下方复制按钮进行复制，再进入游戏内进行兑换即可")])]),t._v(" "),i("div",{staticClass:"btns"},[i("a",{attrs:{href:"javascript:void(0);",target:"_self"},on:{click:function(a){return t.copycode(t.giftObj.code)}}},[t._v("复制")]),t._v(" "),i("a",{attrs:{href:"javascript:void(0);",target:"_self"},on:{click:function(a){return t.playgame(t.giftObj.id)}}},[t._v("进入游戏")])])])])],1)},staticRenderFns:[]};var h=e("C7Lr")(g,p,!1,function(t){e("v7z5")},"data-v-1dcc94c4",null);a.default=h.exports},R20v:function(t,a){},Wo5J:function(t,a,e){"use strict";var i=e("7Ael"),n=(e.n(i),e("UlLi")),s=(e.n(n),e("t7m+")),o=(e.n(s),e("6qFF"));e.n(o)},"XO/m":function(t,a,e){var i=e("7NgR"),n=e("/tnA");t.exports=e("DH3n").getIterator=function(t){var a=n(t);if("function"!=typeof a)throw TypeError(t+" is not iterable!");return i(a.call(t))}},mFto:function(t,a,e){"use strict";var i=e("vRMc"),n=e.n(i),s=e("yzt0"),o=e("CAjZ"),r=e("iwZY"),c=e("/x+G"),l=e("PXM1"),u=Object(o.b)("search"),d=u[0],f=u[1],v=u[2];function g(t,a,e,i){var o={attrs:i.data.attrs,on:Object(s.a)({},i.listeners,{keypress:function(t){13===t.keyCode&&(Object(c.c)(t),Object(r.a)(i,"search",a.value)),Object(r.a)(i,"keypress",t)}})},u=Object(r.b)(i);return u.attrs=void 0,t("div",n()([{class:f({"show-action":a.showAction}),style:{background:a.background}},u]),[null==e.left?void 0:e.left(),t("div",{class:f("content",a.shape)},[function(){if(e.label||a.label)return t("div",{class:f("label")},[e.label?e.label():a.label])}(),t(l.a,n()([{attrs:{type:"search",border:!1,value:a.value,leftIcon:a.leftIcon,rightIcon:a.rightIcon,clearable:a.clearable,clearTrigger:a.clearTrigger},scopedSlots:{"left-icon":e["left-icon"],"right-icon":e["right-icon"]}},o]))]),function(){if(a.showAction)return t("div",{class:f("action"),attrs:{role:"button",tabindex:"0"},on:{click:function(){e.action||(Object(r.a)(i,"input",""),Object(r.a)(i,"cancel"))}}},[e.action?e.action():a.actionText||v("cancel")])}()])}g.props={value:String,label:String,rightIcon:String,actionText:String,background:String,showAction:Boolean,clearTrigger:String,shape:{type:String,default:"square"},clearable:{type:Boolean,default:!0},leftIcon:{type:String,default:"search"}},a.a=d(g)},v7z5:function(t,a){},vY6q:function(t,a,e){e("8LqW"),e("g5OY"),t.exports=e("XO/m")}});